import{r as w,u as F,a as le,c as R,w as H,n as ae,o as m,b as E,d as f,e as c,f as o,P as re,g as S,h as I,i as A,j as l,k as O,l as y,t as P,C as oe,m as W,Q as ne,X as J,p as ie,F as K,q as Q,s as U,Y as ue,v as X,x as Y,J as de,y as G,z as ce,A as pe,_ as Z,B as me,D as fe,E as ve,G as ee,H as ge,I as ye,K as M,L as te,M as be,N as he,O as se,R as _e,S as xe,T as we,U as ke,V as Ve,W as Ce}from"./vendor.77cf1610.js";const $e=function(){const $=document.createElement("link").relList;if($&&$.supports&&$.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&u(p)}).observe(document,{childList:!0,subtree:!0});function v(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(s){if(s.ep)return;s.ep=!0;const n=v(s);fetch(s.href,n)}};$e();const qe={class:"w-full"},Se=["onClick"],Pe={class:"flex items-center"},Le={key:0,class:"overflow-hidden text-ellipsis whitespace-nowrap text-base leading-5"},Te={key:1,class:"text-base leading-5 text-gray-500"},Re={class:"mt-1 rounded-lg bg-white py-1 text-base shadow-2xl"},je={class:"relative px-1.5 pt-0.5"},ze={key:0,class:"px-2.5 py-1.5 text-sm font-medium text-gray-500"},De={class:"flex flex-col space-y-1"},Ie=["innerHTML"],Ae={key:0,class:"mt-1.5 rounded-md px-2.5 py-1.5 text-base text-gray-600"},Ue={key:0,class:"border-t p-1.5 pb-0.5"},Be={__name:"Autocomplete",props:{modelValue:{type:String,default:""},options:{type:Array,default:()=>[]},size:{type:String,default:"md"},variant:{type:String,default:"subtle"},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0}},emits:["update:modelValue","update:query","change"],setup(j,{expose:$,emit:v}){const u=j,s=v,n=w(""),p=w(!1),_=w(null),b=F(),k=le(),q=R(()=>"value"in b),V=R({get(){return q.value?b.value:u.modelValue},set(a){n.value="",a&&(p.value=!1),s(q.value?"change":"update:modelValue",a)}});function e(){p.value=!1}const h=R(()=>{var d;return!u.options||u.options.length==0?[]:(((d=u.options[0])==null?void 0:d.group)?u.options:[{group:"",items:u.options}]).map((r,t)=>({key:t,group:r.group,hideLabel:r.hideLabel||!1,items:u.filterable?g(r.items):r.items})).filter(r=>r.items.length>0)});function g(a){return n.value?a.filter(d=>[d.label,d.value].some(t=>(t||"").toString().toLowerCase().includes(n.value.toLowerCase()))):a}function x(a){if(typeof a=="string"){let r=h.value.flatMap(t=>t.items).find(t=>t.value===a);return(r==null?void 0:r.label)||a}return a==null?void 0:a.label}H(n,a=>{s("update:query",a)}),H(p,a=>{a&&ae(()=>{_.value.el.focus()})});const L=R(()=>u.disabled?"text-gray-600":"text-gray-800"),D=R(()=>{let a={sm:"text-base rounded h-7",md:"text-base rounded h-8",lg:"text-lg rounded-md h-10",xl:"text-xl rounded-md h-10"}[u.size],d={sm:"py-1.5 px-2",md:"py-1.5 px-2.5",lg:"py-1.5 px-3",xl:"py-1.5 px-3"}[u.size],r=u.disabled?"disabled":u.variant,t={subtle:"border border-gray-100 bg-gray-100 placeholder-gray-500 hover:border-gray-200 hover:bg-gray-200 focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",outline:"border border-gray-300 bg-white placeholder-gray-500 hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",disabled:["border bg-gray-50 placeholder-gray-400",u.variant==="outline"?"border-gray-300":"border-transparent"]}[r];return[a,d,t,L.value,"transition-colors w-full"]});return $({query:n}),(a,d)=>(m(),E(o(de),{modelValue:V.value,"onUpdate:modelValue":d[3]||(d[3]=r=>V.value=r),nullable:""},{default:f(({open:r})=>[c(o(re),{class:"w-full",show:p.value,"onUpdate:show":d[2]||(d[2]=t=>p.value=t)},{target:f(({open:t,togglePopover:T})=>[S(a.$slots,"target",I(A({open:t,togglePopover:T})),()=>[l("div",qe,[l("button",{class:O(["flex w-full items-center justify-between focus:outline-none",D.value]),onClick:()=>T()},[l("div",Pe,[S(a.$slots,"prefix"),V.value?(m(),y("span",Le,P(x(V.value)),1)):(m(),y("span",Te,P(j.placeholder||""),1))]),c(o(oe),{class:"h-4 w-4 stroke-1.5"})],10,Se)])])]),body:f(({isOpen:t})=>{var T;return[W(l("div",null,[l("div",Re,[l("div",je,[c(o(ne),{ref_key:"search",ref:_,class:"form-input w-full",type:"text",onChange:d[0]||(d[0]=i=>{n.value=i.target.value}),value:n.value,autocomplete:"off",placeholder:"Search"},null,8,["value"]),l("button",{class:"absolute right-1.5 inline-flex h-7 w-7 items-center justify-center",onClick:d[1]||(d[1]=i=>V.value=null)},[c(o(J),{class:"h-4 w-4 stroke-1.5"})])]),c(o(ie),{class:"my-1 max-h-[12rem] overflow-y-auto px-1.5",static:""},{default:f(()=>[(m(!0),y(K,null,Q(h.value,i=>W((m(),y("div",{class:"mt-1.5",key:i.key},[i.group&&!i.hideLabel?(m(),y("div",ze,P(i.group),1)):U("",!0),(m(!0),y(K,null,Q(i.items,C=>(m(),E(o(ue),{as:"template",key:C.value,value:C},{default:f(({active:z,selected:N})=>[l("li",{class:O(["flex items-center rounded px-2.5 py-2 text-base",{"bg-gray-100":z}])},[S(a.$slots,"item-prefix",X({ref_for:!0},{active:z,selected:N,option:C})),S(a.$slots,"item-label",X({ref_for:!0},{active:z,selected:N,option:C}),()=>[l("div",De,[l("div",null,P(C.label),1),C.label!=C.description?(m(),y("div",{key:0,class:"text-xs text-gray-700",innerHTML:C.description},null,8,Ie)):U("",!0)])])],2)]),_:2},1032,["value"]))),128))])),[[Y,i.items.length>0]])),128)),h.value.length==0?(m(),y("li",Ae," No results found ")):U("",!0)]),_:3}),o(k).footer?(m(),y("div",Ue,[S(a.$slots,"footer",I(A({value:(T=_.value)==null?void 0:T.el._value,close:e})))])):U("",!0)])],512),[[Y,t]])]}),_:3},8,["show"])]),_:3},8,["modelValue"]))}},Ne={class:"space-y-1.5"},Oe={__name:"Link",props:{doctype:{type:String,required:!0},filters:{type:Object,default:()=>({})},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(j,{emit:$}){const v=j,u=$,s=F(),n=R(()=>"value"in s),p=R({get:()=>n.value?s.value:v.modelValue,set:e=>(e==null?void 0:e.value)&&u(n.value?"change":"update:modelValue",e==null?void 0:e.value)}),_=w(null),b=w("");G(()=>{var e;return(e=_.value)==null?void 0:e.query},e=>{e=e||"",b.value!==e&&(b.value=e,q(e))},{debounce:300,immediate:!0}),G(()=>v.doctype,()=>q(""),{debounce:300,immediate:!0});const k=ce({url:"frappe.desk.search.search_link",cache:[v.doctype,b.value],method:"POST",auto:!0,params:{txt:b.value,doctype:v.doctype,filters:v.filters},transform:e=>e.map(h=>({label:h.value,value:h.value,description:h.description}))});function q(e){k.update({params:{txt:e,doctype:v.doctype,filters:v.filters}}),k.reload()}const V=R(()=>[{sm:"text-xs",md:"text-base"}[s.size||"sm"],"text-gray-600"]);return(e,h)=>(m(),y("div",Ne,[o(s).label?(m(),y("label",{key:0,class:O(["block",V.value])},P(o(s).label),3)):U("",!0),c(Be,{ref_key:"autocomplete",ref:_,options:o(k).data,modelValue:p.value,"onUpdate:modelValue":h[0]||(h[0]=g=>p.value=g),size:o(s).size||"sm",variant:o(s).variant,placeholder:o(s).placeholder,filterable:!1},pe({target:f(({open:g,togglePopover:x})=>[S(e.$slots,"target",I(A({open:g,togglePopover:x})))]),prefix:f(()=>[S(e.$slots,"prefix")]),"item-prefix":f(({active:g,selected:x,option:L})=>[S(e.$slots,"item-prefix",I(A({active:g,selected:x,option:L})))]),"item-label":f(({active:g,selected:x,option:L})=>[S(e.$slots,"item-label",I(A({active:g,selected:x,option:L})))]),_:2},[o(s).onCreate?{name:"footer",fn:f(({value:g,close:x})=>[l("div",null,[c(o(Z),{variant:"ghost",class:"w-full !justify-start",label:"Create New",onClick:L=>o(s).onCreate(g,x)},{prefix:f(()=>[c(o(me),{class:"h-4 w-4 stroke-1.5"})]),_:2},1032,["onClick"])])]),key:"0"}:void 0]),1032,["options","modelValue","size","variant","placeholder"])]))}},Me={class:"grid place-content-center pt-10"},Ee={class:"flex-col w-[35rem] p-2 my-2 shadow-md"},Fe={class:"p-2 text-center"},He={class:"p-2"},We={class:"p-2"},Je={class:"p-2"},Ke={class:"p-2"},Qe={class:"p-2"},Xe={class:"p-2 text-center",required:!0},Ye={class:"mb-4"},Ge={key:1,class:"mb-4"},Ze={class:"flex items-center"},et={class:"border rounded-md p-2 mr-2"},tt={class:"flex flex-col"},st={class:"text-center p-5"},lt={class:"text-center p-2"},at={class:"text-center p-2"},rt={__name:"App",setup(j){const $=new URL(window.location.href),v=new URLSearchParams($.search);let s=Object.fromEntries(v).name;const n=fe("$translate"),p=w(""),_=w(""),b=w(""),k=w(""),q=w(""),V=w(""),e=ve({invoice_image:null,travelDoc:""});e.travelDoc=s;const h=r=>{e.invoice_image=r},g=()=>{e.invoice_image=null};function x(r){let t=r.name.split(".").pop().toLowerCase();if(!["png","jpg","jpeg","pdf","xls","xlsx"].includes(t))return n("Only Images, Excel and Pdf are allowed")}function L(){var r;if(!e.travelDoc)return q.value="Please select Project Travel Request",!1;if(!((r=e.invoice_image)==null?void 0:r.file_url))return q.value="Invoice is Required.",!1}const D=ee({doctype:"Project Travel Request",fields:["name","bill_amount","service_charge","ticket_attachment","invoice_attachment","supplier_invoice_number","supplier_invoice_date"]});let a=ee({doctype:"Project Travel Request",fields:["name"],filters:{workflow_state:["=","Pending at TA"]},pageLength:99999});ge(()=>{a.data==null&&a.fetch()});function d(){var r;L()!=!1&&(D.setValue,D.setValue.submit({name:e.travelDoc,supplier_invoice_date:p.value,supplier_invoice_number:_.value,bill_amount:b.value,service_charge:k.value,invoice_attachment:((r=e.invoice_image)==null?void 0:r.file_url)||""},{onSuccess(){window.location.replace("/success-page"),console.log("Successs"),console.log(D,"======travelReq")},onError(){console.log("Error!!"),window.open("/success-page"),V.value="Something Went Wrong."}},p.value="",_.value="",e.travelDoc="",b.value="",k.value="",e.invoice_image=null))}return(r,t)=>{const T=ye("Button");return m(),y("div",Me,[l("div",Ee,[t[9]||(t[9]=l("p",{class:"text-3xl p-2 text-center"},"Project Travel Request",-1)),l("div",Fe,"Pending at TA Counts: "+P(o(a).data.length),1),l("div",null,[l("div",He,[c(Oe,{modelValue:e.travelDoc,"onUpdate:modelValue":t[0]||(t[0]=i=>e.travelDoc=i),doctype:"Project Travel Request",label:"Project Travel Request",required:!0,filters:{docstatus:1,workflow_state:"Pending at TA"}},null,8,["modelValue"])]),l("div",We,[c(o(M),{type:"date",ref_for:!0,size:"md",variant:"subtle",placeholder:"Supplier Invoice Date",disabled:!1,required:r.required,label:"Supplier Invoice Date",modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=i=>p.value=i)},null,8,["required","modelValue"])]),l("div",Je,[c(o(M),{type:"text",ref_for:!0,size:"md",variant:"subtle",placeholder:"Supplier Invoice Number",disabled:!1,label:"Supplier Invoice Number",modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=i=>_.value=i),class:O(r.required&&"reqd")},null,8,["modelValue","class"])]),l("div",Ke,[c(o(M),{type:"text",ref_for:!0,size:"md",variant:"subtle",placeholder:"Bill Amount",disabled:!1,label:"Bill Amount",required:!0,modelValue:b.value,"onUpdate:modelValue":t[3]||(t[3]=i=>b.value=i)},null,8,["modelValue"])]),l("div",Qe,[c(o(M),{type:"text",ref_for:!0,size:"md",variant:"subtle",placeholder:"Service Charges",disabled:!1,label:"Service Charges",modelValue:k.value,"onUpdate:modelValue":t[4]||(t[4]=i=>k.value=i),required:""},null,8,["modelValue"])]),l("div",Xe,[e.invoice_image?(m(),y("div",Ge,[t[7]||(t[7]=l("div",{class:"text-xs text-gray-600 mb-1"},P("Invoice"),-1)),l("div",Ze,[l("div",et,[c(o(he),{class:"h-5 w-5 stroke-1.5 text-gray-700"})]),l("div",tt,[l("span",null,P(e.invoice_image.file_name),1)]),c(o(J),{onClick:t[6]||(t[6]=i=>g()),class:"bg-gray-200 rounded-md cursor-pointer stroke-1.5 w-5 h-5 p-1 ml-4"})])])):(m(),E(o(be),{key:0,fileTypes:["image/*"],validateFile:x,onSuccess:t[5]||(t[5]=i=>h(i))},{default:f(({file:i,progress:C,uploading:z,openFileSelector:N})=>[l("div",Ye,[c(T,{onClick:N,loading:z},{default:f(()=>[te(P(z?`Uploading ${C}%`:"Upload a Invoice"),1)]),_:2},1032,["onClick","loading"])])]),_:1}))])]),l("div",st,[c(T,{class:"p-2",variant:"solid",ref_for:!0,theme:"gray",size:"md",label:"Button",loading:!1,loadingText:null,disabled:!1,onClick:d},{default:f(()=>t[8]||(t[8]=[te(" Send Request ")])),_:1}),l("div",lt,[c(o(se),{message:q.value},null,8,["message"])]),l("div",at,[c(o(se),{message:V.value},null,8,["message"])])])])])}}};let B=_e(rt);xe("resourceFetcher",Ce);B.use(we);B.component("Button",Z);B.component("Card",ke);B.component("Input",Ve);B.mount("#app");
