var X=(g,f,m)=>new Promise((l,t)=>{var i=p=>{try{h(m.next(p))}catch(x){t(x)}},c=p=>{try{h(m.throw(p))}catch(x){t(x)}},h=p=>p.done?l(p.value):Promise.resolve(p.value).then(i,c);h((m=m.apply(g,f)).next())});import{c as N,r as Y,a as R,b as me,d as pe,e as S,u as Z,f as fe,w as ee,n as ve,o as y,g as F,h as b,i as v,j as o,P as ge,k as U,l as E,m as z,p as s,q as H,s as k,t as L,C as _e,v as te,Q as ye,X as G,x as he,F as se,y as le,z as O,Y as be,A as ae,B as re,J as xe,D as oe,E as ke,_ as ie,G as we,H as Ce,I as Ve,K as $e,L as M,M as J,N as ne,O as ue,R as Le,S as qe,T as Se,U as Pe,V as Te,W as Ie,Z as Re}from"./vendor.136d88f0.js";const Ue=function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function m(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(t){if(t.ep)return;t.ep=!0;const i=m(t);fetch(t.href,i)}};Ue();const je="modulepreload",ce={},De="/assets/happay/get-travel-request-docs/",de=function(f,m){return!m||m.length===0?f():Promise.all(m.map(l=>{if(l=`${De}${l}`,l in ce)return;ce[l]=!0;const t=l.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${i}`))return;const c=document.createElement("link");if(c.rel=t?"stylesheet":je,t||(c.as="script",c.crossOrigin=""),c.href=l,document.head.appendChild(c),t)return new Promise((h,p)=>{c.addEventListener("load",h),c.addEventListener("error",p)})})).then(()=>f())},K=N({url:"frappe.auth.get_logged_user",cache:"User",onError(g){g&&g.exc_type==="AuthenticationError"&&B.push({name:"LoginPage"})}});function Q(){let f=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return f==="Guest"&&(f=null),f}const A=Y({login:N({url:"login",makeParams({email:g,password:f}){return{usr:g,pwd:f}},onSuccess(g){K.reload(),A.user=Q(),A.login.reset(),B.replace(g.default_route||"/")}}),logout:N({url:"logout",onSuccess(){K.reset(),A.user=Q(),B.replace({name:"Login"})}}),user:Q(),isLoggedIn:R(()=>!!A.user)}),Ee=[{path:"/",name:"Home",component:()=>de(()=>import("./Home.fd942912.js"),["assets/Home.fd942912.js","assets/vendor.136d88f0.js","assets/vendor.1875b906.css"])},{name:"Login",path:"/account/login",component:()=>de(()=>import("./Login.993ab9ec.js"),["assets/Login.993ab9ec.js","assets/vendor.136d88f0.js","assets/vendor.1875b906.css"])}];let B=me({history:pe("/get-travel-request-docs"),routes:Ee});B.beforeEach((g,f,m)=>X(void 0,null,function*(){let l=A.isLoggedIn;try{yield K.promise}catch(t){l=!1}g.name==="Login"&&l?m({name:"Home"}):g.name!=="Login"&&!l?m({name:"Login"}):m()}));const ze={class:"w-full"},Oe=["onClick"],Ae={class:"flex items-center"},Be={key:0,class:"overflow-hidden text-ellipsis whitespace-nowrap text-base leading-5"},Ne={key:1,class:"text-base leading-5 text-gray-500"},Fe={class:"mt-1 rounded-lg bg-white py-1 text-base shadow-2xl"},He={class:"relative px-1.5 pt-0.5"},Me={key:0,class:"px-2.5 py-1.5 text-sm font-medium text-gray-500"},We={class:"flex flex-col space-y-1"},Ge=["innerHTML"],Je={key:0,class:"mt-1.5 rounded-md px-2.5 py-1.5 text-base text-gray-600"},Ke={key:0,class:"border-t p-1.5 pb-0.5"},Qe={__name:"Autocomplete",props:{modelValue:{type:String,default:""},options:{type:Array,default:()=>[]},size:{type:String,default:"md"},variant:{type:String,default:"subtle"},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0}},emits:["update:modelValue","update:query","change"],setup(g,{expose:f,emit:m}){const l=g,t=m,i=S(""),c=S(!1),h=S(null),p=Z(),x=fe(),q=R(()=>"value"in p),n=R({get(){return q.value?p.value:l.modelValue},set(r){i.value="",r&&(c.value=!1),t(q.value?"change":"update:modelValue",r)}});function u(){c.value=!1}const C=R(()=>{var _;return!l.options||l.options.length==0?[]:(((_=l.options[0])==null?void 0:_.group)?l.options:[{group:"",items:l.options}]).map((a,e)=>({key:e,group:a.group,hideLabel:a.hideLabel||!1,items:l.filterable?w(a.items):a.items})).filter(a=>a.items.length>0)});function w(r){return i.value?r.filter(_=>[_.label,_.value].some(e=>(e||"").toString().toLowerCase().includes(i.value.toLowerCase()))):r}function $(r){if(typeof r=="string"){let a=C.value.flatMap(e=>e.items).find(e=>e.value===r);return(a==null?void 0:a.label)||r}return r==null?void 0:r.label}ee(i,r=>{t("update:query",r)}),ee(c,r=>{r&&ve(()=>{h.value.el.focus()})});const P=R(()=>l.disabled?"text-gray-600":"text-gray-800"),W=R(()=>{let r={sm:"text-base rounded h-7",md:"text-base rounded h-8",lg:"text-lg rounded-md h-10",xl:"text-xl rounded-md h-10"}[l.size],_={sm:"py-1.5 px-2",md:"py-1.5 px-2.5",lg:"py-1.5 px-3",xl:"py-1.5 px-3"}[l.size],a=l.disabled?"disabled":l.variant,e={subtle:"border border-gray-100 bg-gray-100 placeholder-gray-500 hover:border-gray-200 hover:bg-gray-200 focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",outline:"border border-gray-300 bg-white placeholder-gray-500 hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",disabled:["border bg-gray-50 placeholder-gray-400",l.variant==="outline"?"border-gray-300":"border-transparent"]}[a];return[r,_,e,P.value,"transition-colors w-full"]});return f({query:i}),(r,_)=>(y(),F(o(xe),{modelValue:n.value,"onUpdate:modelValue":_[3]||(_[3]=a=>n.value=a),nullable:""},{default:b(({open:a})=>[v(o(ge),{class:"w-full",show:c.value,"onUpdate:show":_[2]||(_[2]=e=>c.value=e)},{target:b(({open:e,togglePopover:T})=>[U(r.$slots,"target",E(z({open:e,togglePopover:T})),()=>[s("div",ze,[s("button",{class:H(["flex w-full items-center justify-between focus:outline-none",W.value]),onClick:()=>T()},[s("div",Ae,[U(r.$slots,"prefix"),n.value?(y(),k("span",Be,L($(n.value)),1)):(y(),k("span",Ne,L(g.placeholder||""),1))]),v(o(_e),{class:"h-4 w-4 stroke-1.5"})],10,Oe)])])]),body:b(({isOpen:e})=>{var T;return[te(s("div",null,[s("div",Fe,[s("div",He,[v(o(ye),{ref_key:"search",ref:h,class:"form-input w-full",type:"text",onChange:_[0]||(_[0]=d=>{i.value=d.target.value}),value:i.value,autocomplete:"off",placeholder:"Search"},null,8,["value"]),s("button",{class:"absolute right-1.5 inline-flex h-7 w-7 items-center justify-center",onClick:_[1]||(_[1]=d=>n.value=null)},[v(o(G),{class:"h-4 w-4 stroke-1.5"})])]),v(o(he),{class:"my-1 max-h-[12rem] overflow-y-auto px-1.5",static:""},{default:b(()=>[(y(!0),k(se,null,le(C.value,d=>te((y(),k("div",{class:"mt-1.5",key:d.key},[d.group&&!d.hideLabel?(y(),k("div",Me,L(d.group),1)):O("",!0),(y(!0),k(se,null,le(d.items,V=>(y(),F(o(be),{as:"template",key:V.value,value:V},{default:b(({active:I,selected:j})=>[s("li",{class:H(["flex items-center rounded px-2.5 py-2 text-base",{"bg-gray-100":I}])},[U(r.$slots,"item-prefix",ae({ref_for:!0},{active:I,selected:j,option:V})),U(r.$slots,"item-label",ae({ref_for:!0},{active:I,selected:j,option:V}),()=>[s("div",We,[s("div",null,L(V.label),1),V.label!=V.description?(y(),k("div",{key:0,class:"text-xs text-gray-700",innerHTML:V.description},null,8,Ge)):O("",!0)])])],2)]),_:2},1032,["value"]))),128))])),[[re,d.items.length>0]])),128)),C.value.length==0?(y(),k("li",Je," No results found ")):O("",!0)]),_:3}),o(x).footer?(y(),k("div",Ke,[U(r.$slots,"footer",E(z({value:(T=h.value)==null?void 0:T.el._value,close:u})))])):O("",!0)])],512),[[re,e]])]}),_:3},8,["show"])]),_:3},8,["modelValue"]))}},Xe={class:"space-y-1.5"},Ye={__name:"Link",props:{doctype:{type:String,required:!0},filters:{type:Object,default:()=>({})},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(g,{emit:f}){const m=g,l=f,t=Z(),i=R(()=>"value"in t),c=R({get:()=>i.value?t.value:m.modelValue,set:u=>(u==null?void 0:u.value)&&l(i.value?"change":"update:modelValue",u==null?void 0:u.value)}),h=S(null),p=S("");oe(()=>{var u;return(u=h.value)==null?void 0:u.query},u=>{u=u||"",p.value!==u&&(p.value=u,q(u))},{debounce:300,immediate:!0}),oe(()=>m.doctype,()=>q(""),{debounce:300,immediate:!0});const x=N({url:"frappe.desk.search.search_link",cache:[m.doctype,p.value],method:"POST",auto:!0,params:{txt:p.value,doctype:m.doctype,filters:m.filters},transform:u=>u.map(C=>({label:C.value,value:C.value,description:C.description}))});function q(u){x.update({params:{txt:u,doctype:m.doctype,filters:m.filters}}),x.reload()}const n=R(()=>[{sm:"text-xs",md:"text-base"}[t.size||"sm"],"text-gray-600"]);return(u,C)=>(y(),k("div",Xe,[o(t).label?(y(),k("label",{key:0,class:H(["block",n.value])},L(o(t).label),3)):O("",!0),v(Qe,{ref_key:"autocomplete",ref:h,options:o(x).data,modelValue:c.value,"onUpdate:modelValue":C[0]||(C[0]=w=>c.value=w),size:o(t).size||"sm",variant:o(t).variant,placeholder:o(t).placeholder,filterable:!1},ke({target:b(({open:w,togglePopover:$})=>[U(u.$slots,"target",E(z({open:w,togglePopover:$})))]),prefix:b(()=>[U(u.$slots,"prefix")]),"item-prefix":b(({active:w,selected:$,option:P})=>[U(u.$slots,"item-prefix",E(z({active:w,selected:$,option:P})))]),"item-label":b(({active:w,selected:$,option:P})=>[U(u.$slots,"item-label",E(z({active:w,selected:$,option:P})))]),_:2},[o(t).onCreate?{name:"footer",fn:b(({value:w,close:$})=>[s("div",null,[v(o(ie),{variant:"ghost",class:"w-full !justify-start",label:"Create New",onClick:P=>o(t).onCreate(w,$)},{prefix:b(()=>[v(o(we),{class:"h-4 w-4 stroke-1.5"})]),_:2},1032,["onClick"])])]),key:"0"}:void 0]),1032,["options","modelValue","size","variant","placeholder"])]))}},Ze={class:"grid place-content-center"},et={class:"flex-col w-96 pt-10"},tt={class:"p-2"},st={class:"p-2"},lt={class:"p-2"},at={class:"p-2"},rt={class:"p-2"},ot={class:"p-2 text-center",required:!0},it={class:"mb-4"},nt={key:1,class:"mb-4"},ut={class:"flex items-center"},ct={class:"border rounded-md p-2 mr-2"},dt={class:"flex flex-col"},mt={class:"p-2 text-center",required:!0},pt={class:"mb-4"},ft={key:1,class:"mb-4"},vt={class:"flex items-center"},gt={class:"border rounded-md p-2 mr-2"},_t={class:"flex flex-col"},yt={class:"text-center p-5"},ht={class:"text-center p-2"},bt={__name:"App",setup(g){const f=new URL(window.location.href),m=new URLSearchParams(f.search);let t=Object.fromEntries(m).name;const i=Ce("$translate"),c=S(""),h=S(""),p=S(""),x=S(""),q=S(""),n=Y({ticket_image:null,invoice_image:null,travelDoc:""});n.travelDoc=t;const u=a=>{n.ticket_image=a},C=()=>{n.ticket_image=null},w=a=>{n.invoice_image=a},$=()=>{n.invoice_image=null};function P(a){let e=a.name.split(".").pop().toLowerCase();if(!["png","jpg","jpeg","pdf","xls","xlsx"].includes(e))return i("Only Images, Excel and Pdf are allowed")}function W(){var a,e;if(!n.travelDoc)return q.value="Please select Project Travel Request",!1;if(!((a=n.ticket_image)==null?void 0:a.file_url))return q.value="Ticket is Required.",!1;if(!((e=n.invoice_image)==null?void 0:e.file_url))return q.value="Invoice is Required.",!1}const r=Ve({doctype:"Project Travel Request",fields:["name","bill_amount","service_charge","ticket_attachment","invoice_attachment","supplier_invoice_number","supplier_invoice_date"]});function _(){var a,e;W()!=!1&&(r.setValue,r.setValue.submit({name:n.travelDoc,supplier_invoice_date:c.value,supplier_invoice_number:h.value,bill_amount:p.value,service_charge:x.value,ticket_attachment:((a=n.ticket_image)==null?void 0:a.file_url)||"",invoice_attachment:((e=n.invoice_image)==null?void 0:e.file_url)||""},{onSuccess(){window.location.replace("/success-page"),console.log("Successs"),console.log(r,"======travelReq")},onError(){console.log("Error!!")}},c.value="",h.value="",n.travelDoc="",p.value="",x.value="",n.ticket_image=null,n.invoice_image=null))}return(a,e)=>{const T=$e("Button");return y(),k("div",Ze,[s("div",et,[e[12]||(e[12]=s("p",{class:"text-3xl p-2 text-center"},"Project Travel Request",-1)),s("div",null,[s("div",tt,[v(Ye,{modelValue:n.travelDoc,"onUpdate:modelValue":e[0]||(e[0]=d=>n.travelDoc=d),doctype:"Project Travel Request",label:"Project Travel Request",required:!0,filters:{docstatus:1,vendor_invoice_status:"Ticket Pending",workflow_state:"Approved"}},null,8,["modelValue"])]),s("div",st,[v(o(M),{type:"date",ref_for:!0,size:"md",variant:"subtle",placeholder:"Supplier Invoice Date",disabled:!1,required:a.required,label:"Supplier Invoice Date",modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=d=>c.value=d)},null,8,["required","modelValue"])]),s("div",lt,[v(o(M),{type:"text",ref_for:!0,size:"md",variant:"subtle",placeholder:"Supplier Invoice Number",disabled:!1,label:"Supplier Invoice Number",modelValue:h.value,"onUpdate:modelValue":e[2]||(e[2]=d=>h.value=d),class:H(a.required&&"reqd")},null,8,["modelValue","class"])]),s("div",at,[v(o(M),{type:"text",ref_for:!0,size:"md",variant:"subtle",placeholder:"Bill Amount",disabled:!1,label:"Bill Amount",required:!0,modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=d=>p.value=d)},null,8,["modelValue"])]),s("div",rt,[v(o(M),{type:"text",ref_for:!0,size:"md",variant:"subtle",placeholder:"Service Charges",disabled:!1,label:"Service Charges",modelValue:x.value,"onUpdate:modelValue":e[4]||(e[4]=d=>x.value=d),required:""},null,8,["modelValue"])]),s("div",ot,[n.ticket_image?(y(),k("div",nt,[e[9]||(e[9]=s("div",{class:"text-xs text-gray-600 mb-1"},L("Ticket"),-1)),s("div",ut,[s("div",ct,[v(o(ue),{class:"h-5 w-5 stroke-1.5 text-gray-700"})]),s("div",dt,[s("span",null,L(n.ticket_image.file_name),1)]),v(o(G),{onClick:e[6]||(e[6]=d=>C()),class:"bg-gray-200 rounded-md cursor-pointer stroke-1.5 w-5 h-5 p-1 ml-4"})])])):(y(),F(o(ne),{key:0,fileTypes:["image/*"],validateFile:P,onSuccess:e[5]||(e[5]=d=>u(d))},{default:b(({file:d,progress:V,uploading:I,openFileSelector:j})=>[s("div",it,[v(T,{onClick:j,loading:I},{default:b(()=>[J(L(I?`Uploading ${V}%`:"Upload a Ticket"),1)]),_:2},1032,["onClick","loading"])])]),_:1}))]),s("div",mt,[n.invoice_image?(y(),k("div",ft,[e[10]||(e[10]=s("div",{class:"text-xs text-gray-600 mb-1"},L("Invoice"),-1)),s("div",vt,[s("div",gt,[v(o(ue),{class:"h-5 w-5 stroke-1.5 text-gray-700"})]),s("div",_t,[s("span",null,L(n.invoice_image.file_name),1)]),v(o(G),{onClick:e[8]||(e[8]=d=>$()),class:"bg-gray-200 rounded-md cursor-pointer stroke-1.5 w-5 h-5 p-1 ml-4"})])])):(y(),F(o(ne),{key:0,fileTypes:["image/*"],validateFile:P,onSuccess:e[7]||(e[7]=d=>w(d))},{default:b(({file:d,progress:V,uploading:I,openFileSelector:j})=>[s("div",pt,[v(T,{onClick:j,loading:I},{default:b(()=>[J(L(I?`Uploading ${V}%`:"Upload a Invoice"),1)]),_:2},1032,["onClick","loading"])])]),_:1}))])]),s("div",yt,[v(T,{class:"p-2",variant:"solid",ref_for:!0,theme:"gray",size:"md",label:"Button",loading:!1,loadingText:null,disabled:!1,onClick:_},{default:b(()=>e[11]||(e[11]=[J(" Send Request ")])),_:1}),s("div",ht,[v(o(Le),{message:q.value},null,8,["message"])])])])])}}};let D=qe(bt);Se("resourceFetcher",Re);D.use(B);D.use(Pe);D.component("Button",ie);D.component("Card",Te);D.component("Input",Ie);D.mount("#app");export{A as s};
