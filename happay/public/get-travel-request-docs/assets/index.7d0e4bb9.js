var K=(f,p,u)=>new Promise((l,e)=>{var r=d=>{try{y(u.next(d))}catch(b){e(b)}},i=d=>{try{y(u.throw(d))}catch(b){e(b)}},y=d=>d.done?l(d.value):Promise.resolve(d.value).then(r,i);y((u=u.apply(f,p)).next())});import{c as A,r as Q,a as q,b as ce,d as de,e as P,u as X,f as pe,w as Y,n as me,o as h,g as M,h as _,i as g,j as c,P as fe,k as R,l as D,m as E,p as n,q as B,s as w,t as I,C as ve,v as Z,Q as ge,X as ee,x as ye,F as te,y as se,z as U,Y as he,A as le,B as ae,J as be,D as re,E as _e,_ as oe,G as xe,H as we,I as ke,K as Ve,L as N,M as ne,N as Ce,O as $e,R as Le,S as Pe,T as Se,U as qe,V as Re,W as Ie,Z as Te}from"./vendor.136d88f0.js";const je=function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function u(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(e){if(e.ep)return;e.ep=!0;const r=u(e);fetch(e.href,r)}};je();const De="modulepreload",ie={},Ee="/assets/happay/get-travel-request-docs/",ue=function(p,u){return!u||u.length===0?p():Promise.all(u.map(l=>{if(l=`${Ee}${l}`,l in ie)return;ie[l]=!0;const e=l.endsWith(".css"),r=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${r}`))return;const i=document.createElement("link");if(i.rel=e?"stylesheet":De,e||(i.as="script",i.crossOrigin=""),i.href=l,document.head.appendChild(i),e)return new Promise((y,d)=>{i.addEventListener("load",y),i.addEventListener("error",d)})})).then(()=>p())},W=A({url:"frappe.auth.get_logged_user",cache:"User",onError(f){f&&f.exc_type==="AuthenticationError"&&O.push({name:"LoginPage"})}});function G(){let p=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return p==="Guest"&&(p=null),p}const z=Q({login:A({url:"login",makeParams({email:f,password:p}){return{usr:f,pwd:p}},onSuccess(f){W.reload(),z.user=G(),z.login.reset(),O.replace(f.default_route||"/")}}),logout:A({url:"logout",onSuccess(){W.reset(),z.user=G(),O.replace({name:"Login"})}}),user:G(),isLoggedIn:q(()=>!!z.user)}),Ue=[{path:"/",name:"Home",component:()=>ue(()=>import("./Home.e17158eb.js"),["assets/Home.e17158eb.js","assets/vendor.136d88f0.js","assets/vendor.1875b906.css"])},{name:"Login",path:"/account/login",component:()=>ue(()=>import("./Login.c9cf57bb.js"),["assets/Login.c9cf57bb.js","assets/vendor.136d88f0.js","assets/vendor.1875b906.css"])}];let O=ce({history:de("/get-travel-request-docs"),routes:Ue});O.beforeEach((f,p,u)=>K(void 0,null,function*(){let l=z.isLoggedIn;try{yield W.promise}catch(e){l=!1}f.name==="Login"&&l?u({name:"Home"}):f.name!=="Login"&&!l?u({name:"Login"}):u()}));const ze={class:"w-full"},Oe=["onClick"],Ae={class:"flex items-center"},Be={key:0,class:"overflow-hidden text-ellipsis whitespace-nowrap text-base leading-5"},Ne={key:1,class:"text-base leading-5 text-gray-500"},Fe={class:"mt-1 rounded-lg bg-white py-1 text-base shadow-2xl"},He={class:"relative px-1.5 pt-0.5"},Me={key:0,class:"px-2.5 py-1.5 text-sm font-medium text-gray-500"},We={class:"flex flex-col space-y-1"},Ge=["innerHTML"],Je={key:0,class:"mt-1.5 rounded-md px-2.5 py-1.5 text-base text-gray-600"},Ke={key:0,class:"border-t p-1.5 pb-0.5"},Qe={__name:"Autocomplete",props:{modelValue:{type:String,default:""},options:{type:Array,default:()=>[]},size:{type:String,default:"md"},variant:{type:String,default:"subtle"},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0}},emits:["update:modelValue","update:query","change"],setup(f,{expose:p,emit:u}){const l=f,e=u,r=P(""),i=P(!1),y=P(null),d=X(),b=pe(),S=q(()=>"value"in d),m=q({get(){return S.value?d.value:l.modelValue},set(s){r.value="",s&&(i.value=!1),e(S.value?"change":"update:modelValue",s)}});function o(){i.value=!1}const k=q(()=>{var t;return!l.options||l.options.length==0?[]:(((t=l.options[0])==null?void 0:t.group)?l.options:[{group:"",items:l.options}]).map((v,a)=>({key:a,group:v.group,hideLabel:v.hideLabel||!1,items:l.filterable?x(v.items):v.items})).filter(v=>v.items.length>0)});function x(s){return r.value?s.filter(t=>[t.label,t.value].some(a=>(a||"").toString().toLowerCase().includes(r.value.toLowerCase()))):s}function C(s){if(typeof s=="string"){let v=k.value.flatMap(a=>a.items).find(a=>a.value===s);return(v==null?void 0:v.label)||s}return s==null?void 0:s.label}Y(r,s=>{e("update:query",s)}),Y(i,s=>{s&&me(()=>{y.value.el.focus()})});const $=q(()=>l.disabled?"text-gray-600":"text-gray-800"),F=q(()=>{let s={sm:"text-base rounded h-7",md:"text-base rounded h-8",lg:"text-lg rounded-md h-10",xl:"text-xl rounded-md h-10"}[l.size],t={sm:"py-1.5 px-2",md:"py-1.5 px-2.5",lg:"py-1.5 px-3",xl:"py-1.5 px-3"}[l.size],v=l.disabled?"disabled":l.variant,a={subtle:"border border-gray-100 bg-gray-100 placeholder-gray-500 hover:border-gray-200 hover:bg-gray-200 focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",outline:"border border-gray-300 bg-white placeholder-gray-500 hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",disabled:["border bg-gray-50 placeholder-gray-400",l.variant==="outline"?"border-gray-300":"border-transparent"]}[v];return[s,t,a,$.value,"transition-colors w-full"]});return p({query:r}),(s,t)=>(h(),M(c(be),{modelValue:m.value,"onUpdate:modelValue":t[3]||(t[3]=v=>m.value=v),nullable:""},{default:_(({open:v})=>[g(c(fe),{class:"w-full",show:i.value,"onUpdate:show":t[2]||(t[2]=a=>i.value=a)},{target:_(({open:a,togglePopover:T})=>[R(s.$slots,"target",D(E({open:a,togglePopover:T})),()=>[n("div",ze,[n("button",{class:B(["flex w-full items-center justify-between focus:outline-none",F.value]),onClick:()=>T()},[n("div",Ae,[R(s.$slots,"prefix"),m.value?(h(),w("span",Be,I(C(m.value)),1)):(h(),w("span",Ne,I(f.placeholder||""),1))]),g(c(ve),{class:"h-4 w-4 stroke-1.5"})],10,Oe)])])]),body:_(({isOpen:a})=>{var T;return[Z(n("div",null,[n("div",Fe,[n("div",He,[g(c(ge),{ref_key:"search",ref:y,class:"form-input w-full",type:"text",onChange:t[0]||(t[0]=V=>{r.value=V.target.value}),value:r.value,autocomplete:"off",placeholder:"Search"},null,8,["value"]),n("button",{class:"absolute right-1.5 inline-flex h-7 w-7 items-center justify-center",onClick:t[1]||(t[1]=V=>m.value=null)},[g(c(ee),{class:"h-4 w-4 stroke-1.5"})])]),g(c(ye),{class:"my-1 max-h-[12rem] overflow-y-auto px-1.5",static:""},{default:_(()=>[(h(!0),w(te,null,se(k.value,V=>Z((h(),w("div",{class:"mt-1.5",key:V.key},[V.group&&!V.hideLabel?(h(),w("div",Me,I(V.group),1)):U("",!0),(h(!0),w(te,null,se(V.items,L=>(h(),M(c(he),{as:"template",key:L.value,value:L},{default:_(({active:H,selected:J})=>[n("li",{class:B(["flex items-center rounded px-2.5 py-2 text-base",{"bg-gray-100":H}])},[R(s.$slots,"item-prefix",le({ref_for:!0},{active:H,selected:J,option:L})),R(s.$slots,"item-label",le({ref_for:!0},{active:H,selected:J,option:L}),()=>[n("div",We,[n("div",null,I(L.label),1),L.label!=L.description?(h(),w("div",{key:0,class:"text-xs text-gray-700",innerHTML:L.description},null,8,Ge)):U("",!0)])])],2)]),_:2},1032,["value"]))),128))])),[[ae,V.items.length>0]])),128)),k.value.length==0?(h(),w("li",Je," No results found ")):U("",!0)]),_:3}),c(b).footer?(h(),w("div",Ke,[R(s.$slots,"footer",D(E({value:(T=y.value)==null?void 0:T.el._value,close:o})))])):U("",!0)])],512),[[ae,a]])]}),_:3},8,["show"])]),_:3},8,["modelValue"]))}},Xe={class:"space-y-1.5"},Ye={__name:"Link",props:{doctype:{type:String,required:!0},filters:{type:Object,default:()=>({})},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(f,{emit:p}){const u=f,l=p,e=X(),r=q(()=>"value"in e),i=q({get:()=>r.value?e.value:u.modelValue,set:o=>(o==null?void 0:o.value)&&l(r.value?"change":"update:modelValue",o==null?void 0:o.value)}),y=P(null),d=P("");re(()=>{var o;return(o=y.value)==null?void 0:o.query},o=>{o=o||"",d.value!==o&&(d.value=o,S(o))},{debounce:300,immediate:!0}),re(()=>u.doctype,()=>S(""),{debounce:300,immediate:!0});const b=A({url:"frappe.desk.search.search_link",cache:[u.doctype,d.value],method:"POST",auto:!0,params:{txt:d.value,doctype:u.doctype,filters:u.filters},transform:o=>o.map(k=>({label:k.value,value:k.value,description:k.description}))});function S(o){b.update({params:{txt:o,doctype:u.doctype,filters:u.filters}}),b.reload()}const m=q(()=>[{sm:"text-xs",md:"text-base"}[e.size||"sm"],"text-gray-600"]);return(o,k)=>(h(),w("div",Xe,[c(e).label?(h(),w("label",{key:0,class:B(["block",m.value])},I(c(e).label),3)):U("",!0),g(Qe,{ref_key:"autocomplete",ref:y,options:c(b).data,modelValue:i.value,"onUpdate:modelValue":k[0]||(k[0]=x=>i.value=x),size:c(e).size||"sm",variant:c(e).variant,placeholder:c(e).placeholder,filterable:!1},_e({target:_(({open:x,togglePopover:C})=>[R(o.$slots,"target",D(E({open:x,togglePopover:C})))]),prefix:_(()=>[R(o.$slots,"prefix")]),"item-prefix":_(({active:x,selected:C,option:$})=>[R(o.$slots,"item-prefix",D(E({active:x,selected:C,option:$})))]),"item-label":_(({active:x,selected:C,option:$})=>[R(o.$slots,"item-label",D(E({active:x,selected:C,option:$})))]),_:2},[c(e).onCreate?{name:"footer",fn:_(({value:x,close:C})=>[n("div",null,[g(c(oe),{variant:"ghost",class:"w-full !justify-start",label:"Create New",onClick:$=>c(e).onCreate(x,C)},{prefix:_(()=>[g(c(xe),{class:"h-4 w-4 stroke-1.5"})]),_:2},1032,["onClick"])])]),key:"0"}:void 0]),1032,["options","modelValue","size","variant","placeholder"])]))}},Ze={class:"grid place-content-center pt-10"},et={class:"flex-col w-[35rem] p-2 my-2 shadow-md"},tt={class:"p-2"},st={class:"p-2"},lt={class:"p-2"},at={class:"p-2"},rt={class:"p-2"},ot={class:"p-2 text-center",required:!0},nt={class:"mb-4"},it={key:1,class:"mb-4"},ut={class:"flex items-center"},ct={class:"border rounded-md p-2 mr-2"},dt={class:"flex flex-col"},pt={class:"text-center p-5"},mt={class:"text-center p-2"},ft={__name:"App",setup(f){const p=new URL(window.location.href),u=new URLSearchParams(p.search);let e=Object.fromEntries(u).name;const r=we("$translate"),i=P(""),y=P(""),d=P(""),b=P(""),S=P(""),m=Q({invoice_image:null,travelDoc:""});m.travelDoc=e;const o=s=>{m.invoice_image=s},k=()=>{m.invoice_image=null};function x(s){let t=s.name.split(".").pop().toLowerCase();if(!["png","jpg","jpeg","pdf","xls","xlsx"].includes(t))return r("Only Images, Excel and Pdf are allowed")}function C(){var s;if(!m.travelDoc)return S.value="Please select Project Travel Request",!1;if(!((s=m.invoice_image)==null?void 0:s.file_url))return S.value="Invoice is Required.",!1}const $=ke({doctype:"Project Travel Request",fields:["name","bill_amount","service_charge","ticket_attachment","invoice_attachment","supplier_invoice_number","supplier_invoice_date"]});function F(){var s;C()!=!1&&($.setValue,$.setValue.submit({name:m.travelDoc,supplier_invoice_date:i.value,supplier_invoice_number:y.value,bill_amount:d.value,service_charge:b.value,invoice_attachment:((s=m.invoice_image)==null?void 0:s.file_url)||""},{onSuccess(){window.location.replace("/success-page"),console.log("Successs"),console.log($,"======travelReq")},onError(){console.log("Error!!")}},i.value="",y.value="",m.travelDoc="",d.value="",b.value="",m.invoice_image=null))}return(s,t)=>{const v=Ve("Button");return h(),w("div",Ze,[n("div",et,[t[9]||(t[9]=n("p",{class:"text-3xl p-2 text-center"},"Project Travel Request",-1)),n("div",null,[n("div",tt,[g(Ye,{modelValue:m.travelDoc,"onUpdate:modelValue":t[0]||(t[0]=a=>m.travelDoc=a),doctype:"Project Travel Request",label:"Project Travel Request",required:!0,filters:{docstatus:1,workflow_state:"Pending at TA"}},null,8,["modelValue"])]),n("div",st,[g(c(N),{type:"date",ref_for:!0,size:"md",variant:"subtle",placeholder:"Supplier Invoice Date",disabled:!1,required:s.required,label:"Supplier Invoice Date",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=a=>i.value=a)},null,8,["required","modelValue"])]),n("div",lt,[g(c(N),{type:"text",ref_for:!0,size:"md",variant:"subtle",placeholder:"Supplier Invoice Number",disabled:!1,label:"Supplier Invoice Number",modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=a=>y.value=a),class:B(s.required&&"reqd")},null,8,["modelValue","class"])]),n("div",at,[g(c(N),{type:"text",ref_for:!0,size:"md",variant:"subtle",placeholder:"Bill Amount",disabled:!1,label:"Bill Amount",required:!0,modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=a=>d.value=a)},null,8,["modelValue"])]),n("div",rt,[g(c(N),{type:"text",ref_for:!0,size:"md",variant:"subtle",placeholder:"Service Charges",disabled:!1,label:"Service Charges",modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=a=>b.value=a),required:""},null,8,["modelValue"])]),n("div",ot,[m.invoice_image?(h(),w("div",it,[t[7]||(t[7]=n("div",{class:"text-xs text-gray-600 mb-1"},I("Invoice"),-1)),n("div",ut,[n("div",ct,[g(c($e),{class:"h-5 w-5 stroke-1.5 text-gray-700"})]),n("div",dt,[n("span",null,I(m.invoice_image.file_name),1)]),g(c(ee),{onClick:t[6]||(t[6]=a=>k()),class:"bg-gray-200 rounded-md cursor-pointer stroke-1.5 w-5 h-5 p-1 ml-4"})])])):(h(),M(c(Ce),{key:0,fileTypes:["image/*"],validateFile:x,onSuccess:t[5]||(t[5]=a=>o(a))},{default:_(({file:a,progress:T,uploading:V,openFileSelector:L})=>[n("div",nt,[g(v,{onClick:L,loading:V},{default:_(()=>[ne(I(V?`Uploading ${T}%`:"Upload a Invoice"),1)]),_:2},1032,["onClick","loading"])])]),_:1}))])]),n("div",pt,[g(v,{class:"p-2",variant:"solid",ref_for:!0,theme:"gray",size:"md",label:"Button",loading:!1,loadingText:null,disabled:!1,onClick:F},{default:_(()=>t[8]||(t[8]=[ne(" Send Request ")])),_:1}),n("div",mt,[g(c(Le),{message:S.value},null,8,["message"])])])])])}}};let j=Pe(ft);Se("resourceFetcher",Te);j.use(O);j.use(qe);j.component("Button",oe);j.component("Card",Re);j.component("Input",Ie);j.mount("#app");export{z as s};
