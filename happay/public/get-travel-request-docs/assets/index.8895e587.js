var K=(m,p,c)=>new Promise((l,e)=>{var o=d=>{try{h(c.next(d))}catch(_){e(_)}},n=d=>{try{h(c.throw(d))}catch(_){e(_)}},h=d=>d.done?l(d.value):Promise.resolve(d.value).then(o,n);h((c=c.apply(m,p)).next())});import{c as N,r as Q,a as q,b as de,d as pe,e as L,u as X,f as me,w as Y,n as fe,o as y,g as M,h as b,i as v,j as u,P as ve,k as R,l as U,m as z,p as r,q as F,s as w,t as T,C as ge,v as Z,Q as he,X as ee,x as ye,F as te,y as se,z as O,Y as _e,A as le,B as ae,J as be,D as re,E as xe,_ as oe,G as we,H as ke,I as Ve,K as Ce,L as H,M as ne,N as $e,O as Le,R as ie,S as Se,T as Pe,U as qe,V as Re,W as Ie,Z as Te}from"./vendor.136d88f0.js";const je=function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function c(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(e){if(e.ep)return;e.ep=!0;const o=c(e);fetch(e.href,o)}};je();const De="modulepreload",ue={},Ee="/assets/happay/get-travel-request-docs/",ce=function(p,c){return!c||c.length===0?p():Promise.all(c.map(l=>{if(l=`${Ee}${l}`,l in ue)return;ue[l]=!0;const e=l.endsWith(".css"),o=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${o}`))return;const n=document.createElement("link");if(n.rel=e?"stylesheet":De,e||(n.as="script",n.crossOrigin=""),n.href=l,document.head.appendChild(n),e)return new Promise((h,d)=>{n.addEventListener("load",h),n.addEventListener("error",d)})})).then(()=>p())},W=N({url:"frappe.auth.get_logged_user",cache:"User",onError(m){m&&m.exc_type==="AuthenticationError"&&B.push({name:"LoginPage"})}});function G(){let p=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return p==="Guest"&&(p=null),p}const A=Q({login:N({url:"login",makeParams({email:m,password:p}){return{usr:m,pwd:p}},onSuccess(m){W.reload(),A.user=G(),A.login.reset(),B.replace(m.default_route||"/")}}),logout:N({url:"logout",onSuccess(){W.reset(),A.user=G(),B.replace({name:"Login"})}}),user:G(),isLoggedIn:q(()=>!!A.user)}),Ue=[{path:"/",name:"Home",component:()=>ce(()=>import("./Home.d83a7e13.js"),["assets/Home.d83a7e13.js","assets/vendor.136d88f0.js","assets/vendor.1875b906.css"])},{name:"Login",path:"/account/login",component:()=>ce(()=>import("./Login.f09d6879.js"),["assets/Login.f09d6879.js","assets/vendor.136d88f0.js","assets/vendor.1875b906.css"])}];let B=de({history:pe("/get-travel-request-docs"),routes:Ue});B.beforeEach((m,p,c)=>K(void 0,null,function*(){let l=A.isLoggedIn;try{yield W.promise}catch(e){l=!1}m.name==="Login"&&l?c({name:"Home"}):m.name!=="Login"&&!l?c({name:"Login"}):c()}));const ze={class:"w-full"},Oe=["onClick"],Ae={class:"flex items-center"},Be={key:0,class:"overflow-hidden text-ellipsis whitespace-nowrap text-base leading-5"},Ne={key:1,class:"text-base leading-5 text-gray-500"},Fe={class:"mt-1 rounded-lg bg-white py-1 text-base shadow-2xl"},He={class:"relative px-1.5 pt-0.5"},Me={key:0,class:"px-2.5 py-1.5 text-sm font-medium text-gray-500"},We={class:"flex flex-col space-y-1"},Ge=["innerHTML"],Je={key:0,class:"mt-1.5 rounded-md px-2.5 py-1.5 text-base text-gray-600"},Ke={key:0,class:"border-t p-1.5 pb-0.5"},Qe={__name:"Autocomplete",props:{modelValue:{type:String,default:""},options:{type:Array,default:()=>[]},size:{type:String,default:"md"},variant:{type:String,default:"subtle"},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0}},emits:["update:modelValue","update:query","change"],setup(m,{expose:p,emit:c}){const l=m,e=c,o=L(""),n=L(!1),h=L(null),d=X(),_=me(),P=q(()=>"value"in d),S=q({get(){return P.value?d.value:l.modelValue},set(i){o.value="",i&&(n.value=!1),e(P.value?"change":"update:modelValue",i)}});function t(){n.value=!1}const k=q(()=>{var a;return!l.options||l.options.length==0?[]:(((a=l.options[0])==null?void 0:a.group)?l.options:[{group:"",items:l.options}]).map((s,g)=>({key:g,group:s.group,hideLabel:s.hideLabel||!1,items:l.filterable?x(s.items):s.items})).filter(s=>s.items.length>0)});function x(i){return o.value?i.filter(a=>[a.label,a.value].some(g=>(g||"").toString().toLowerCase().includes(o.value.toLowerCase()))):i}function V(i){if(typeof i=="string"){let s=k.value.flatMap(g=>g.items).find(g=>g.value===i);return(s==null?void 0:s.label)||i}return i==null?void 0:i.label}Y(o,i=>{e("update:query",i)}),Y(n,i=>{i&&fe(()=>{h.value.el.focus()})});const I=q(()=>l.disabled?"text-gray-600":"text-gray-800"),D=q(()=>{let i={sm:"text-base rounded h-7",md:"text-base rounded h-8",lg:"text-lg rounded-md h-10",xl:"text-xl rounded-md h-10"}[l.size],a={sm:"py-1.5 px-2",md:"py-1.5 px-2.5",lg:"py-1.5 px-3",xl:"py-1.5 px-3"}[l.size],s=l.disabled?"disabled":l.variant,g={subtle:"border border-gray-100 bg-gray-100 placeholder-gray-500 hover:border-gray-200 hover:bg-gray-200 focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",outline:"border border-gray-300 bg-white placeholder-gray-500 hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",disabled:["border bg-gray-50 placeholder-gray-400",l.variant==="outline"?"border-gray-300":"border-transparent"]}[s];return[i,a,g,I.value,"transition-colors w-full"]});return p({query:o}),(i,a)=>(y(),M(u(be),{modelValue:S.value,"onUpdate:modelValue":a[3]||(a[3]=s=>S.value=s),nullable:""},{default:b(({open:s})=>[v(u(ve),{class:"w-full",show:n.value,"onUpdate:show":a[2]||(a[2]=g=>n.value=g)},{target:b(({open:g,togglePopover:f})=>[R(i.$slots,"target",U(z({open:g,togglePopover:f})),()=>[r("div",ze,[r("button",{class:F(["flex w-full items-center justify-between focus:outline-none",D.value]),onClick:()=>f()},[r("div",Ae,[R(i.$slots,"prefix"),S.value?(y(),w("span",Be,T(V(S.value)),1)):(y(),w("span",Ne,T(m.placeholder||""),1))]),v(u(ge),{class:"h-4 w-4 stroke-1.5"})],10,Oe)])])]),body:b(({isOpen:g})=>{var f;return[Z(r("div",null,[r("div",Fe,[r("div",He,[v(u(he),{ref_key:"search",ref:h,class:"form-input w-full",type:"text",onChange:a[0]||(a[0]=C=>{o.value=C.target.value}),value:o.value,autocomplete:"off",placeholder:"Search"},null,8,["value"]),r("button",{class:"absolute right-1.5 inline-flex h-7 w-7 items-center justify-center",onClick:a[1]||(a[1]=C=>S.value=null)},[v(u(ee),{class:"h-4 w-4 stroke-1.5"})])]),v(u(ye),{class:"my-1 max-h-[12rem] overflow-y-auto px-1.5",static:""},{default:b(()=>[(y(!0),w(te,null,se(k.value,C=>Z((y(),w("div",{class:"mt-1.5",key:C.key},[C.group&&!C.hideLabel?(y(),w("div",Me,T(C.group),1)):O("",!0),(y(!0),w(te,null,se(C.items,$=>(y(),M(u(_e),{as:"template",key:$.value,value:$},{default:b(({active:E,selected:J})=>[r("li",{class:F(["flex items-center rounded px-2.5 py-2 text-base",{"bg-gray-100":E}])},[R(i.$slots,"item-prefix",le({ref_for:!0},{active:E,selected:J,option:$})),R(i.$slots,"item-label",le({ref_for:!0},{active:E,selected:J,option:$}),()=>[r("div",We,[r("div",null,T($.label),1),$.label!=$.description?(y(),w("div",{key:0,class:"text-xs text-gray-700",innerHTML:$.description},null,8,Ge)):O("",!0)])])],2)]),_:2},1032,["value"]))),128))])),[[ae,C.items.length>0]])),128)),k.value.length==0?(y(),w("li",Je," No results found ")):O("",!0)]),_:3}),u(_).footer?(y(),w("div",Ke,[R(i.$slots,"footer",U(z({value:(f=h.value)==null?void 0:f.el._value,close:t})))])):O("",!0)])],512),[[ae,g]])]}),_:3},8,["show"])]),_:3},8,["modelValue"]))}},Xe={class:"space-y-1.5"},Ye={__name:"Link",props:{doctype:{type:String,required:!0},filters:{type:Object,default:()=>({})},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(m,{emit:p}){const c=m,l=p,e=X(),o=q(()=>"value"in e),n=q({get:()=>o.value?e.value:c.modelValue,set:t=>(t==null?void 0:t.value)&&l(o.value?"change":"update:modelValue",t==null?void 0:t.value)}),h=L(null),d=L("");re(()=>{var t;return(t=h.value)==null?void 0:t.query},t=>{t=t||"",d.value!==t&&(d.value=t,P(t))},{debounce:300,immediate:!0}),re(()=>c.doctype,()=>P(""),{debounce:300,immediate:!0});const _=N({url:"frappe.desk.search.search_link",cache:[c.doctype,d.value],method:"POST",auto:!0,params:{txt:d.value,doctype:c.doctype,filters:c.filters},transform:t=>t.map(k=>({label:k.value,value:k.value,description:k.description}))});function P(t){_.update({params:{txt:t,doctype:c.doctype,filters:c.filters}}),_.reload()}const S=q(()=>[{sm:"text-xs",md:"text-base"}[e.size||"sm"],"text-gray-600"]);return(t,k)=>(y(),w("div",Xe,[u(e).label?(y(),w("label",{key:0,class:F(["block",S.value])},T(u(e).label),3)):O("",!0),v(Qe,{ref_key:"autocomplete",ref:h,options:u(_).data,modelValue:n.value,"onUpdate:modelValue":k[0]||(k[0]=x=>n.value=x),size:u(e).size||"sm",variant:u(e).variant,placeholder:u(e).placeholder,filterable:!1},xe({target:b(({open:x,togglePopover:V})=>[R(t.$slots,"target",U(z({open:x,togglePopover:V})))]),prefix:b(()=>[R(t.$slots,"prefix")]),"item-prefix":b(({active:x,selected:V,option:I})=>[R(t.$slots,"item-prefix",U(z({active:x,selected:V,option:I})))]),"item-label":b(({active:x,selected:V,option:I})=>[R(t.$slots,"item-label",U(z({active:x,selected:V,option:I})))]),_:2},[u(e).onCreate?{name:"footer",fn:b(({value:x,close:V})=>[r("div",null,[v(u(oe),{variant:"ghost",class:"w-full !justify-start",label:"Create New",onClick:I=>u(e).onCreate(x,V)},{prefix:b(()=>[v(u(we),{class:"h-4 w-4 stroke-1.5"})]),_:2},1032,["onClick"])])]),key:"0"}:void 0]),1032,["options","modelValue","size","variant","placeholder"])]))}},Ze={class:"grid place-content-center pt-10"},et={class:"flex-col w-[35rem] p-2 my-2 shadow-md"},tt={class:"p-2"},st={class:"p-2"},lt={class:"p-2"},at={class:"p-2"},rt={class:"p-2"},ot={class:"p-2 text-center",required:!0},nt={class:"mb-4"},it={key:1,class:"mb-4"},ut={class:"flex items-center"},ct={class:"border rounded-md p-2 mr-2"},dt={class:"flex flex-col"},pt={class:"text-center p-5"},mt={class:"text-center p-2"},ft={class:"text-center p-2"},vt={__name:"App",setup(m){const p=new URL(window.location.href),c=new URLSearchParams(p.search);let e=Object.fromEntries(c).name;const o=ke("$translate"),n=L(""),h=L(""),d=L(""),_=L(""),P=L(""),S=L(""),t=Q({invoice_image:null,travelDoc:""});t.travelDoc=e;const k=a=>{t.invoice_image=a},x=()=>{t.invoice_image=null};function V(a){let s=a.name.split(".").pop().toLowerCase();if(!["png","jpg","jpeg","pdf","xls","xlsx"].includes(s))return o("Only Images, Excel and Pdf are allowed")}function I(){var a;if(!t.travelDoc)return P.value="Please select Project Travel Request",!1;if(!((a=t.invoice_image)==null?void 0:a.file_url))return P.value="Invoice is Required.",!1}const D=Ve({doctype:"Project Travel Request",fields:["name","bill_amount","service_charge","ticket_attachment","invoice_attachment","supplier_invoice_number","supplier_invoice_date"]});function i(){var a;I()!=!1&&(D.setValue,D.setValue.submit({name:t.travelDoc,supplier_invoice_date:n.value,supplier_invoice_number:h.value,bill_amount:d.value,service_charge:_.value,invoice_attachment:((a=t.invoice_image)==null?void 0:a.file_url)||""},{onSuccess(){window.location.replace("/success-page"),console.log("Successs"),console.log(D,"======travelReq")},onError(){console.log("Error!!"),S.value="Something Went Wrong."}},n.value="",h.value="",t.travelDoc="",d.value="",_.value="",t.invoice_image=null))}return(a,s)=>{const g=Ce("Button");return y(),w("div",Ze,[r("div",et,[s[9]||(s[9]=r("p",{class:"text-3xl p-2 text-center"},"Project Travel Request",-1)),r("div",null,[r("div",tt,[v(Ye,{modelValue:t.travelDoc,"onUpdate:modelValue":s[0]||(s[0]=f=>t.travelDoc=f),doctype:"Project Travel Request",label:"Project Travel Request",required:!0,filters:{docstatus:1,workflow_state:"Pending at TA"}},null,8,["modelValue"])]),r("div",st,[v(u(H),{type:"date",ref_for:!0,size:"md",variant:"subtle",placeholder:"Supplier Invoice Date",disabled:!1,required:a.required,label:"Supplier Invoice Date",modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=f=>n.value=f)},null,8,["required","modelValue"])]),r("div",lt,[v(u(H),{type:"text",ref_for:!0,size:"md",variant:"subtle",placeholder:"Supplier Invoice Number",disabled:!1,label:"Supplier Invoice Number",modelValue:h.value,"onUpdate:modelValue":s[2]||(s[2]=f=>h.value=f),class:F(a.required&&"reqd")},null,8,["modelValue","class"])]),r("div",at,[v(u(H),{type:"text",ref_for:!0,size:"md",variant:"subtle",placeholder:"Bill Amount",disabled:!1,label:"Bill Amount",required:!0,modelValue:d.value,"onUpdate:modelValue":s[3]||(s[3]=f=>d.value=f)},null,8,["modelValue"])]),r("div",rt,[v(u(H),{type:"text",ref_for:!0,size:"md",variant:"subtle",placeholder:"Service Charges",disabled:!1,label:"Service Charges",modelValue:_.value,"onUpdate:modelValue":s[4]||(s[4]=f=>_.value=f),required:""},null,8,["modelValue"])]),r("div",ot,[t.invoice_image?(y(),w("div",it,[s[7]||(s[7]=r("div",{class:"text-xs text-gray-600 mb-1"},T("Invoice"),-1)),r("div",ut,[r("div",ct,[v(u(Le),{class:"h-5 w-5 stroke-1.5 text-gray-700"})]),r("div",dt,[r("span",null,T(t.invoice_image.file_name),1)]),v(u(ee),{onClick:s[6]||(s[6]=f=>x()),class:"bg-gray-200 rounded-md cursor-pointer stroke-1.5 w-5 h-5 p-1 ml-4"})])])):(y(),M(u($e),{key:0,fileTypes:["image/*"],validateFile:V,onSuccess:s[5]||(s[5]=f=>k(f))},{default:b(({file:f,progress:C,uploading:$,openFileSelector:E})=>[r("div",nt,[v(g,{onClick:E,loading:$},{default:b(()=>[ne(T($?`Uploading ${C}%`:"Upload a Invoice"),1)]),_:2},1032,["onClick","loading"])])]),_:1}))])]),r("div",pt,[v(g,{class:"p-2",variant:"solid",ref_for:!0,theme:"gray",size:"md",label:"Button",loading:!1,loadingText:null,disabled:!1,onClick:i},{default:b(()=>s[8]||(s[8]=[ne(" Send Request ")])),_:1}),r("div",mt,[v(u(ie),{message:P.value},null,8,["message"])]),r("div",ft,[v(u(ie),{message:S.value},null,8,["message"])])])])])}}};let j=Se(vt);Pe("resourceFetcher",Te);j.use(B);j.use(qe);j.component("Button",oe);j.component("Card",Re);j.component("Input",Ie);j.mount("#app");export{A as s};
