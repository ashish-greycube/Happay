import{r as w,u as H,a as le,c as R,w as W,n as ae,o as m,b as E,d as f,e as c,f as o,P as re,g as S,h as I,i as A,j as s,k as O,l as b,t as P,C as oe,m as J,Q as ne,X as K,p as ie,F as Q,q as X,s as U,Y as ue,v as Y,x as G,J as de,y as Z,z as ce,A as pe,_ as ee,B as me,D as fe,E as ve,G as te,H as ge,I as be,K as F,L as M,M as ye,N as he,O as se,R as _e,S as xe,T as we,U as ke,V as Ve,W as Ce}from"./vendor.ce762160.js";const $e=function(){const $=document.createElement("link").relList;if($&&$.supports&&$.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))u(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&u(p)}).observe(document,{childList:!0,subtree:!0});function v(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerpolicy&&(n.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?n.credentials="include":l.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(l){if(l.ep)return;l.ep=!0;const n=v(l);fetch(l.href,n)}};$e();const qe={class:"w-full"},Se=["onClick"],Pe={class:"flex items-center"},Le={key:0,class:"overflow-hidden text-ellipsis whitespace-nowrap text-base leading-5"},Te={key:1,class:"text-base leading-5 text-gray-500"},Re={class:"mt-1 rounded-lg bg-white py-1 text-base shadow-2xl"},je={class:"relative px-1.5 pt-0.5"},ze={key:0,class:"px-2.5 py-1.5 text-sm font-medium text-gray-500"},De={class:"flex flex-col space-y-1"},Ie=["innerHTML"],Ae={key:0,class:"mt-1.5 rounded-md px-2.5 py-1.5 text-base text-gray-600"},Ue={key:0,class:"border-t p-1.5 pb-0.5"},Be={__name:"Autocomplete",props:{modelValue:{type:String,default:""},options:{type:Array,default:()=>[]},size:{type:String,default:"md"},variant:{type:String,default:"subtle"},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0}},emits:["update:modelValue","update:query","change"],setup(j,{expose:$,emit:v}){const u=j,l=v,n=w(""),p=w(!1),_=w(null),y=H(),k=le(),q=R(()=>"value"in y),V=R({get(){return q.value?y.value:u.modelValue},set(a){n.value="",a&&(p.value=!1),l(q.value?"change":"update:modelValue",a)}});function t(){p.value=!1}const h=R(()=>{var d;return!u.options||u.options.length==0?[]:(((d=u.options[0])==null?void 0:d.group)?u.options:[{group:"",items:u.options}]).map((r,e)=>({key:e,group:r.group,hideLabel:r.hideLabel||!1,items:u.filterable?g(r.items):r.items})).filter(r=>r.items.length>0)});function g(a){return n.value?a.filter(d=>[d.label,d.value].some(e=>(e||"").toString().toLowerCase().includes(n.value.toLowerCase()))):a}function x(a){if(typeof a=="string"){let r=h.value.flatMap(e=>e.items).find(e=>e.value===a);return(r==null?void 0:r.label)||a}return a==null?void 0:a.label}W(n,a=>{l("update:query",a)}),W(p,a=>{a&&ae(()=>{_.value.el.focus()})});const L=R(()=>u.disabled?"text-gray-600":"text-gray-800"),D=R(()=>{let a={sm:"text-base rounded h-7",md:"text-base rounded h-8",lg:"text-lg rounded-md h-10",xl:"text-xl rounded-md h-10"}[u.size],d={sm:"py-1.5 px-2",md:"py-1.5 px-2.5",lg:"py-1.5 px-3",xl:"py-1.5 px-3"}[u.size],r=u.disabled?"disabled":u.variant,e={subtle:"border border-gray-100 bg-gray-100 placeholder-gray-500 hover:border-gray-200 hover:bg-gray-200 focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",outline:"border border-gray-300 bg-white placeholder-gray-500 hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",disabled:["border bg-gray-50 placeholder-gray-400",u.variant==="outline"?"border-gray-300":"border-transparent"]}[r];return[a,d,e,L.value,"transition-colors w-full"]});return $({query:n}),(a,d)=>(m(),E(o(de),{modelValue:V.value,"onUpdate:modelValue":d[3]||(d[3]=r=>V.value=r),nullable:""},{default:f(({open:r})=>[c(o(re),{class:"w-full",show:p.value,"onUpdate:show":d[2]||(d[2]=e=>p.value=e)},{target:f(({open:e,togglePopover:T})=>[S(a.$slots,"target",I(A({open:e,togglePopover:T})),()=>[s("div",qe,[s("button",{class:O(["flex w-full items-center justify-between focus:outline-none",D.value]),onClick:()=>T()},[s("div",Pe,[S(a.$slots,"prefix"),V.value?(m(),b("span",Le,P(x(V.value)),1)):(m(),b("span",Te,P(j.placeholder||""),1))]),c(o(oe),{class:"h-4 w-4 stroke-1.5"})],10,Se)])])]),body:f(({isOpen:e})=>{var T;return[J(s("div",null,[s("div",Re,[s("div",je,[c(o(ne),{ref_key:"search",ref:_,class:"form-input w-full",type:"text",onChange:d[0]||(d[0]=i=>{n.value=i.target.value}),value:n.value,autocomplete:"off",placeholder:"Search"},null,8,["value"]),s("button",{class:"absolute right-1.5 inline-flex h-7 w-7 items-center justify-center",onClick:d[1]||(d[1]=i=>V.value=null)},[c(o(K),{class:"h-4 w-4 stroke-1.5"})])]),c(o(ie),{class:"my-1 max-h-[12rem] overflow-y-auto px-1.5",static:""},{default:f(()=>[(m(!0),b(Q,null,X(h.value,i=>J((m(),b("div",{class:"mt-1.5",key:i.key},[i.group&&!i.hideLabel?(m(),b("div",ze,P(i.group),1)):U("",!0),(m(!0),b(Q,null,X(i.items,C=>(m(),E(o(ue),{as:"template",key:C.value,value:C},{default:f(({active:z,selected:N})=>[s("li",{class:O(["flex items-center rounded px-2.5 py-2 text-base",{"bg-gray-100":z}])},[S(a.$slots,"item-prefix",Y({ref_for:!0},{active:z,selected:N,option:C})),S(a.$slots,"item-label",Y({ref_for:!0},{active:z,selected:N,option:C}),()=>[s("div",De,[s("div",null,P(C.label),1),C.label!=C.description?(m(),b("div",{key:0,class:"text-xs text-gray-700",innerHTML:C.description},null,8,Ie)):U("",!0)])])],2)]),_:2},1032,["value"]))),128))])),[[G,i.items.length>0]])),128)),h.value.length==0?(m(),b("li",Ae," No results found ")):U("",!0)]),_:3}),o(k).footer?(m(),b("div",Ue,[S(a.$slots,"footer",I(A({value:(T=_.value)==null?void 0:T.el._value,close:t})))])):U("",!0)])],512),[[G,e]])]}),_:3},8,["show"])]),_:3},8,["modelValue"]))}},Ne={class:"space-y-1.5"},Oe={__name:"Link",props:{doctype:{type:String,required:!0},filters:{type:Object,default:()=>({})},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(j,{emit:$}){const v=j,u=$,l=H(),n=R(()=>"value"in l),p=R({get:()=>n.value?l.value:v.modelValue,set:t=>(t==null?void 0:t.value)&&u(n.value?"change":"update:modelValue",t==null?void 0:t.value)}),_=w(null),y=w("");Z(()=>{var t;return(t=_.value)==null?void 0:t.query},t=>{t=t||"",y.value!==t&&(y.value=t,q(t))},{debounce:300,immediate:!0}),Z(()=>v.doctype,()=>q(""),{debounce:300,immediate:!0});const k=ce({url:"frappe.desk.search.search_link",cache:[v.doctype,y.value],method:"POST",auto:!0,params:{txt:y.value,doctype:v.doctype,filters:v.filters},transform:t=>t.map(h=>({label:h.value,value:h.value,description:h.description}))});function q(t){k.update({params:{txt:t,doctype:v.doctype,filters:v.filters}}),k.reload()}const V=R(()=>[{sm:"text-xs",md:"text-base"}[l.size||"sm"],"text-gray-600"]);return(t,h)=>(m(),b("div",Ne,[o(l).label?(m(),b("label",{key:0,class:O(["block",V.value])},P(o(l).label),3)):U("",!0),c(Be,{ref_key:"autocomplete",ref:_,options:o(k).data,modelValue:p.value,"onUpdate:modelValue":h[0]||(h[0]=g=>p.value=g),size:o(l).size||"sm",variant:o(l).variant,placeholder:o(l).placeholder,filterable:!1},pe({target:f(({open:g,togglePopover:x})=>[S(t.$slots,"target",I(A({open:g,togglePopover:x})))]),prefix:f(()=>[S(t.$slots,"prefix")]),"item-prefix":f(({active:g,selected:x,option:L})=>[S(t.$slots,"item-prefix",I(A({active:g,selected:x,option:L})))]),"item-label":f(({active:g,selected:x,option:L})=>[S(t.$slots,"item-label",I(A({active:g,selected:x,option:L})))]),_:2},[o(l).onCreate?{name:"footer",fn:f(({value:g,close:x})=>[s("div",null,[c(o(ee),{variant:"ghost",class:"w-full !justify-start",label:"Create New",onClick:L=>o(l).onCreate(g,x)},{prefix:f(()=>[c(o(me),{class:"h-4 w-4 stroke-1.5"})]),_:2},1032,["onClick"])])]),key:"0"}:void 0]),1032,["options","modelValue","size","variant","placeholder"])]))}},Me={class:"grid place-content-center pt-10"},Ee={class:"flex-col w-[35rem] p-2 my-2 shadow-md"},Fe={class:"text-center text-red-500"},He={class:"p-2"},We={class:"p-2"},Je={class:"p-2"},Ke={class:"p-2"},Qe={class:"p-2"},Xe={class:"p-2 text-center",required:!0},Ye={class:"mb-4"},Ge={key:1,class:"mb-4"},Ze={class:"flex items-center"},et={class:"border rounded-md p-2 mr-2"},tt={class:"flex flex-col"},st={class:"text-center p-5"},lt={class:"text-center p-2"},at={class:"text-center p-2"},rt={__name:"App",setup(j){const $=new URL(window.location.href),v=new URLSearchParams($.search);let l=Object.fromEntries(v).name;const n=fe("$translate"),p=w(""),_=w(""),y=w(""),k=w(""),q=w(""),V=w(""),t=ve({invoice_image:null,travelDoc:""});t.travelDoc=l;const h=r=>{t.invoice_image=r},g=()=>{t.invoice_image=null};function x(r){let e=r.name.split(".").pop().toLowerCase();if(!["png","jpg","jpeg","pdf","xls","xlsx"].includes(e))return n("Only Images, Excel and Pdf are allowed")}function L(){var r;if(!t.travelDoc)return q.value="Please select Project Travel Request",!1;if(!((r=t.invoice_image)==null?void 0:r.file_url))return q.value="Invoice is Required.",!1}const D=te({doctype:"Project Travel Request",fields:["name","bill_amount","service_charge","ticket_attachment","invoice_attachment","supplier_invoice_number","supplier_invoice_date"]});let a=te({doctype:"Project Travel Request",fields:["name"],filters:{workflow_state:["=","Pending at TA"]},pageLength:99999});ge(()=>{a.data==null&&a.fetch()});function d(){var r;L()!=!1&&(D.setValue,D.setValue.submit({name:t.travelDoc,supplier_invoice_date:p.value,supplier_invoice_number:_.value,bill_amount:y.value,service_charge:k.value,invoice_attachment:((r=t.invoice_image)==null?void 0:r.file_url)||""},{onSuccess(){window.location.replace("/success-page"),console.log("Successs"),console.log(D,"======travelReq")},onError(){console.log("Error!!"),window.open("/success-page"),V.value="Something Went Wrong."}},p.value="",_.value="",t.travelDoc="",y.value="",k.value="",t.invoice_image=null))}return(r,e)=>{const T=be("Button");return m(),b("div",Me,[s("div",Ee,[e[10]||(e[10]=s("p",{class:"text-3xl p-2 text-center"},"Project Travel Request",-1)),e[11]||(e[11]=s("br",null,null,-1)),s("div",Fe,[e[7]||(e[7]=s("span",{class:"text-xl italic font-medium"},"Pending at TA ",-1)),F(" Count (s) : "+P(o(a).data.length),1)]),e[12]||(e[12]=s("br",null,null,-1)),s("div",null,[s("div",He,[c(Oe,{modelValue:t.travelDoc,"onUpdate:modelValue":e[0]||(e[0]=i=>t.travelDoc=i),doctype:"Project Travel Request",label:"Project Travel Request",required:!0,filters:{docstatus:1,workflow_state:"Pending at TA"}},null,8,["modelValue"])]),s("div",We,[c(o(M),{type:"date",ref_for:!0,size:"md",variant:"subtle",placeholder:"Supplier Invoice Date",disabled:!1,required:r.required,label:"Supplier Invoice Date",modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=i=>p.value=i)},null,8,["required","modelValue"])]),s("div",Je,[c(o(M),{type:"text",ref_for:!0,size:"md",variant:"subtle",placeholder:"Supplier Invoice Number",disabled:!1,label:"Supplier Invoice Number",modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=i=>_.value=i),class:O(r.required&&"reqd")},null,8,["modelValue","class"])]),s("div",Ke,[c(o(M),{type:"text",ref_for:!0,size:"md",variant:"subtle",placeholder:"Bill Amount",disabled:!1,label:"Bill Amount",required:!0,modelValue:y.value,"onUpdate:modelValue":e[3]||(e[3]=i=>y.value=i)},null,8,["modelValue"])]),s("div",Qe,[c(o(M),{type:"text",ref_for:!0,size:"md",variant:"subtle",placeholder:"Service Charges",disabled:!1,label:"Service Charges",modelValue:k.value,"onUpdate:modelValue":e[4]||(e[4]=i=>k.value=i),required:""},null,8,["modelValue"])]),s("div",Xe,[t.invoice_image?(m(),b("div",Ge,[e[8]||(e[8]=s("div",{class:"text-xs text-gray-600 mb-1"},P("Invoice"),-1)),s("div",Ze,[s("div",et,[c(o(he),{class:"h-5 w-5 stroke-1.5 text-gray-700"})]),s("div",tt,[s("span",null,P(t.invoice_image.file_name),1)]),c(o(K),{onClick:e[6]||(e[6]=i=>g()),class:"bg-gray-200 rounded-md cursor-pointer stroke-1.5 w-5 h-5 p-1 ml-4"})])])):(m(),E(o(ye),{key:0,fileTypes:["image/*"],validateFile:x,onSuccess:e[5]||(e[5]=i=>h(i))},{default:f(({file:i,progress:C,uploading:z,openFileSelector:N})=>[s("div",Ye,[c(T,{onClick:N,loading:z},{default:f(()=>[F(P(z?`Uploading ${C}%`:"Upload a Invoice"),1)]),_:2},1032,["onClick","loading"])])]),_:1}))])]),s("div",st,[c(T,{class:"p-2",variant:"solid",ref_for:!0,theme:"gray",size:"md",label:"Button",loading:!1,loadingText:null,disabled:!1,onClick:d},{default:f(()=>e[9]||(e[9]=[F(" Send Request ")])),_:1}),s("div",lt,[c(o(se),{message:q.value},null,8,["message"])]),s("div",at,[c(o(se),{message:V.value},null,8,["message"])])])])])}}};let B=_e(rt);xe("resourceFetcher",Ce);B.use(we);B.component("Button",ee);B.component("Card",ke);B.component("Input",Ve);B.mount("#app");
